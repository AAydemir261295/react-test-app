import { useEffect, useRef, useState } from "react";
import { useSelector } from "react-redux";
import { useOutletContext } from "react-router";
import generatePDF from "react-to-pdf";


export function ResultComponent() {
    var formState = useSelector(state => state.form);
    var [age, setAge] = useState(null);
    var [yearsString, setYearsString] = useState("");
    var outletContext = useOutletContext();

    function calculateAge() {
        var birthDate = new Date(formState.date);
        var today = new Date();
        var result = today.getFullYear() - birthDate.getFullYear();
        var m = today.getMonth() - birthDate.getMonth();
        if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
            result--;
            if (result == 1) {
                setYearsString("–≥–æ–¥–∞");
            } else {
                setYearsString("–ª–µ—Ç");
            }
        }

        setAge(result);
    }

    useEffect(() => {
        calculateAge();
    })


    return <div className="result-container">
        <div className="result-container__content">
            <header>
                <h1>**–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –æ—Ç—á—ë—Ç –æ —Ä–µ–±—ë–Ω–∫–µ {age + " " + yearsString}**</h1>
            </header>

            <p>
                ##üìö–ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ <br />
                <br />
                ***–ò–º—è —Ä–µ–±—ë–Ω–∫–∞:** {formState['child-name'].value} <br />
                ***–ì–ª–∞–≤–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ (—Ä–∏—Å—É–Ω–æ–∫ "–î–æ–º")**: –ß—É–≤—Å—Ç–≤–æ –∑–∞—â–∏—â—ë–Ω–Ω–æ—Å—Ç–∏ –∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏.  <br />
                ***–û—Å–Ω–æ–≤–Ω–∞—è —á–µ—Ä—Ç–∞ (—Ä–∏—Å—É–Ω–æ–∫ "–ñ–∏–≤–æ—Ç–Ω–æ–µ")**: –í–æ–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å.  <br />
                ***–°–∞–º–æ–æ—Ü–µ–Ω–∫–∞ (–∞–≤—Ç–æ–ø–æ—Ä—Ç—Ä–µ—Ç)**: –°–∫–ª–æ–Ω–Ω–æ—Å—Ç—å –∫ —Å–∞–º–æ–∫—Ä–∏—Ç–∏–∫–µ, —Å—Ç—Ä–µ–º–ª–µ–Ω–∏–µ –∫ –æ–¥–æ–±—Ä–µ–Ω–∏—é –≤–∑—Ä–æ—Å–ª—ã—Ö.  <br />
            </p>
            <p>
                ---
                <br />
            </p>
            <p>
                ## üîç –†–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–µ —Ä–∞–∑–¥–µ–ª—ã <br />
                <br />
                ### 1. –î–æ–º-–î–µ—Ä–µ–≤–æ-–ß–µ–ª–æ–≤–µ–∫: –∫–ª—é—á–µ–≤—ã–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è <br />
                <br />
                | –≠–ª–µ–º–µ–Ω—Ç | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∏—Å—É–Ω–∫–∞                 | –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –≤—ã–≤–æ–¥                   |<br />
                | ------- | ----------------------------------- | --------------------------------------- |<br />
                | –î–æ–º     | –£—é—Ç–Ω—ã–π, —Å –æ–∫–Ω–∞–º–∏, –¥—ã–º–æ–º, –∑–∞–±–æ—Ä–æ–º    | –ü–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, —Å–µ–º—å—è –≤–∞–∂–Ω–∞ |<br />
                | –î–µ—Ä–µ–≤–æ  | –° –∫–æ—Ä–Ω—è–º–∏, –ø—ã—à–Ω–∞—è –∫—Ä–æ–Ω–∞             | –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å, —Ä–æ—Å—Ç, –∂–∏–∑–Ω–µ–Ω–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è   |<br />
                | –ß–µ–ª–æ–≤–µ–∫ | –ú–∞–ª–µ–Ω—å–∫–∏–π, —Ä—É–∫–∏ –ø—Ä–∏–∂–∞—Ç—ã, –±–µ–∑ —ç–º–æ—Ü–∏–π | –°–∫—Ä–æ–º–Ω–æ—Å—Ç—å, –Ω–µ—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å, —Å–¥–µ—Ä–∂–∞–Ω–Ω–æ—Å—Ç—å |<br />
            </p>
            <p>
                **–û–±—â–∏–π –≤—ã–≤–æ–¥:** –†–µ–±—ë–Ω–æ–∫ —á—É–≤—Å—Ç–≤—É–µ—Ç —Å–µ–±—è –≤ —Å–µ–º—å–µ –∑–∞—â–∏—â—ë–Ω–Ω–æ,
                –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–¥–µ—Ä–∂–∞–Ω –≤ –≤—ã—Ä–∞–∂–µ–Ω–∏–∏ —ç–º–æ—Ü–∏–π –∏ —á—É–≤—Å—Ç–≤—É–µ—Ç
                –Ω–µ—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥–µ.
                <br />
            </p>

            <p>
                ---
                <br />
            </p>

            <p>
                ### 2. –ñ–∏–≤–æ—Ç–Ω–æ–µ: –¥–µ—Ç–∞–ª–∏ –∏ —Ñ–∞–Ω—Ç–∞–∑–∏—è
                <br />
                <br />
                ***–í—ã–±–æ—Ä –∂–∏–≤–æ—Ç–Ω–æ–≥–æ:** –§–∞–Ω—Ç–∞—Å—Ç–∏—á–µ—Å–∫–æ–µ –∏–ª–∏ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–æ–µ —Å—É—â–µ—Å—Ç–≤–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ª–∏—Å–∞ —Å –∫—Ä—ã–ª—å—è–º–∏) <br />
                ***–ê–∫—Ü–µ–Ω—Ç—ã –≤ —Ä–∏—Å—É–Ω–∫–µ:** –ë–æ–ª—å—à–∏–µ –≥–ª–∞–∑–∞, —É—à–∏ ‚Äî –≤–∞–∂–Ω–æ—Å—Ç—å –Ω–∞–±–ª—é–¥–µ–Ω–∏—è, –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å <br />
                ***–ü–æ–∑—ã –∏ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ:** –ú–∏—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ, —Å–∏–¥—è—á–∞—è –ø–æ–∑–∞ ‚Äî –¥–æ–±—Ä–æ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å <br />
                <br />
                <br />
                **–í—ã–≤–æ–¥:** –£ —Ä–µ–±—ë–Ω–∫–∞ —Ö–æ—Ä–æ—à–æ —Ä–∞–∑–≤–∏—Ç–æ –≤–æ–æ–±—Ä–∞–∂–µ–Ω–∏–µ,
                –æ–Ω —Å–∫–ª–æ–Ω–µ–Ω –∫ —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏ –∏ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
                –ú–æ–∂–µ—Ç —Å–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ —ç–º–æ—Ü–∏–∏, –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—è –∞–Ω–∞–ª–∏–∑.
                <br />
            </p>

            <p>
                ---
                <br />
            </p>

            <p>
                ### 3. –ê–≤—Ç–æ–ø–æ—Ä—Ç—Ä–µ—Ç: –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å–∞–º–æ–≤–æ—Å–ø—Ä–∏—è—Ç–∏—è <br />
                <br />
                ***–†–∞–∑–º–µ—Ä —Ñ–∏–≥—É—Ä—ã:** –ú–∞–ª–µ–Ω—å–∫–∏–π ‚Äî –≤–æ–∑–º–æ–∂–Ω–∞ –∑–∞–Ω–∏–∂–µ–Ω–Ω–∞—è —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∞ <br />
                ***–í—ã—Ä–∞–∂–µ–Ω–∏–µ –ª–∏—Ü–∞:** –ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Äî —Å–¥–µ—Ä–∂–∞–Ω–Ω–æ—Å—Ç—å <br />
                ***–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ—Ç–∞–ª–∏:** –ù–µ—Ç —Ñ–æ–Ω–∞ –∏–ª–∏ –≤—Ç–æ—Ä–∏—á–Ω—ã—Ö –æ–±—Ä–∞–∑–æ–≤ ‚Äî –Ω–µ—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Å–æ—Ü–∏—É–º–µ <br />
                <br />
                **–í—ã–≤–æ–¥:** –†–µ–±—ë–Ω–æ–∫ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ –≤–Ω–µ—à–Ω—é—é –æ—Ü–µ–Ω–∫—É,
                –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫–µ, –æ—Å–æ–±–µ–Ω–Ω–æ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –∏ —Å–ª–æ–≤–µ—Å–Ω–æ–π. <br />
            </p>

            <p>
                ---
                <br />
            </p>

            <p>
                ### 4. –û–ø—Ä–æ—Å–Ω–∏–∫: —Å—É–º–º–∞—Ä–Ω—ã–µ –±–∞–ª–ª—ã –∏ –ø—Ä–æ—Ñ–∏–ª—å <br />
                <br />
                | –®–∫–∞–ª–∞                      | –ë–∞–ª–ª—ã (–∏–∑ 25) | <br />
                | -------------------------- | ------------- | <br />
                | –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å | 14            | <br />
                | –°–æ—Ü–∏–∞–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è       | 16            | <br />
                | –°–∞–º–æ—Ä–µ–≥—É–ª—è—Ü–∏—è              | 12            | <br />
                | –ö–æ–º–º—É–Ω–∏–∫–∞—Ç–∏–≤–Ω–æ—Å—Ç—å          | 18            | <br />
                | –°–∞–º–æ–æ—Ü–µ–Ω–∫–∞                 | 11            | <br />
                <br />
                #### –í–∏–∑—É–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å (–ø—Ä–∏–º–µ—Ä): <br />
                <br />
                ```
                <br />
                ‚ñ† –≠–º–æ—Ü. —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å  [‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ°‚ñ°‚ñ°‚ñ°‚ñ°‚ñ°‚ñ°] <br />
                ‚ñ† –°–æ—Ü. –∞–¥–∞–ø—Ç–∞—Ü–∏—è      [‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ°‚ñ°‚ñ°‚ñ°] <br />
                ‚ñ† –°–∞–º–æ—Ä–µ–≥—É–ª—è—Ü–∏—è       [‚ñ†‚ñ†‚ñ†‚ñ†‚ñ°‚ñ°‚ñ°‚ñ°‚ñ°‚ñ°‚ñ°] <br />
                ‚ñ† –ö–æ–º–º—É–Ω–∏–∫–∞—Ç–∏–≤–Ω–æ—Å—Ç—å   [‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ°‚ñ°‚ñ°] <br />
                ‚ñ† –°–∞–º–æ–æ—Ü–µ–Ω–∫–∞          [‚ñ†‚ñ†‚ñ†‚ñ°‚ñ°‚ñ°‚ñ°‚ñ°‚ñ°‚ñ°‚ñ°] <br />
                <br />
                ```
                <br />
            </p>

            <p>
                ---
                <br />
            </p>

            <p>
                ## üìñ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π <br />
                <br />
                * –ß–∞—â–µ —Ö–≤–∞–ª–∏—Ç–µ —Ä–µ–±—ë–Ω–∫–∞ –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç <br />
                * –ü–æ–º–æ–≥–∞–π—Ç–µ –Ω–∞–∑—ã–≤–∞—Ç—å —á—É–≤—Å—Ç–≤–∞: "–¢—ã —Ä–∞—Å—Å—Ç—Ä–æ–∏–ª—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ..." <br />
                * –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—É, –¥–∞–∂–µ –µ—Å–ª–∏ —Ä–µ–±—ë–Ω–æ–∫ –æ—à–∏–±–∞–µ—Ç—Å—è <br />
                * –°–æ–∑–¥–∞–≤–∞–π—Ç–µ —Å–ø–æ–∫–æ–π–Ω—É—é –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—É—é –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –¥–æ–º–∞ <br />
                * –ü–æ–æ—â—Ä—è–π—Ç–µ —Ñ–∞–Ω—Ç–∞–∑–∏—é ‚Äî —Å–∫–∞–∑–∫–∏, —Ä–∏—Å—É–Ω–∫–∏, –∏–≥—Ä—ã –ø–æ —Ä–æ–ª—è–º <br />
                <br />
            </p>

            <p>
                ---
                <br />
            </p>

            <p>
                *–û—Ç—á—ë—Ç —Å–æ—Å—Ç–∞–≤–ª–µ–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–µ–∫—Ç–Ω—ã—Ö –º–µ—Ç–æ–¥–∏–∫ –∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏–π.
                –Ø–≤–ª—è–µ—Ç—Å—è –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–º –¥–ª—è –º—è–≥–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ä–µ–±—ë–Ω–∫–∞ –≤ —Ä–∞–∑–≤–∏—Ç–∏–∏.* <br />
            </p>

        </div>
        <footer className="form-footer">
            <span className="form-footer__stage">–®–∞–≥ 3/3</span>

            <div className="form-footer__buttons-result">
                <button className="form-footer__btn form-footer__btn-download btn btn--primary btn--download nostyle-btn" onClick={(e) => {
                    generatePDF(() => outletContext.current, { filename: "result.pdf" })
                }}>–°–∫–∞—á–∞—Ç—å –æ—Ç—á–µ—Ç PDF</button>
                <button className="form-footer__btn form-footer__btn-share btn btn--primary btn--share nostyle-btn">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏</button>
            </div>
        </footer>
    </div>;
}